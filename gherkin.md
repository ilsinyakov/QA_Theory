# Gherkin

## Content

* [Разработка на основе поведения (Behaviour Driven Development BDD)](#разработка-на-основе-поведения-behaviour-driven-development-bdd)
* [Gherkin синтаксис](#gherkin-синтаксис)
* [Инструменты для работы с Gherkin](#инструменты-для-работы-с-gherkin)

## Разработка на основе поведения (Behaviour Driven Development BDD)

Устранение разрывов между бизнесменами, членами команды и техническими командами (включая команду автоматизации функционального тестирования) может быть осуществлено с помощью так называемого процесса разработки на основе поведения (BDD behavior-driving development). Он связан с процессом Agile и включает в себя следующие техники:

* Взаимодействие внутри команды и ведение переговоров о реализации функционала с точки зрения бизнеса.
* Реализация функциональности итеративно, для обеспечения ценности каждой функции в текущих рыночных условиях
* Документирование процессов, особенностей системы, правил написания кода и создания тестовых примеров для обеспечения единого понимания и согласия внутри команды.

## Gherkin синтаксис

Используются четыре ключевых слова:

**Given** - предварительные условия теста.  
**When** - шаг начинается с этого ключевого слова.  
**Then** - ожидаемый результат предыдущих шагов.  
**And** - если две строки должны начинаться с одних и тех же ключевых слов, вместо них можно использовать And.

Конструкция, которая должна быть использована в тест-кейсе, также соответствует правилам:  
*Given* - в страдательном залоге.  
*When* - что происходит в системе, кто это делает.  
*Then* - то является результатом шага (шагов) When.  

Пример:

> *Given* открыта страница корзины  
> *When* пользователь кладет в корзину товар 234 с количеством 2 и ценой 20  
> *Then* количество товаров в корзине равно 2  
> *And* сумма заказа равна 40

Для покрытия повторяющихся шагов и проведения параметризации используется специальный формат:

> *Given* открыта страница корзины  
> *When* пользователь помещает в корзину товар 234 с количеством \<quantity> и ценой \<price>  
> *Then* количество товаров в корзине составляет \<quantity>  
> *And* сумма заказа равна \<sum>

Тесты в формате Gherkin не только универсальны и удобны. Их основное применение - беспрепятственное встраивание тест-кейсов в автоматизацию.

## Инструменты для работы с Gherkin

Наиболее популярными являются [Cucumber](https://cucumber.io/), [JBehave](https://jbehave.org/) и [behave](https://behave.readthedocs.io/en/latest/)

Это не инструмент в традиционном понимании. Фактически, это библиотека, которая может быть включена в состав системы автоматизированного тестирования. В результате инженер по автоматизации может использовать методы Cucumber в коде и взаимодействовать с тест-кейсами, написанными мануальными тестировщиками.

В Cucumber вся функциональность, которую необходимо покрыть, разделяется на **Функции (Features)**. В одной функции есть от одного до нескольких **Сценариев (Scenarios)**, и ваш Gherkin case должен выглядеть следующим образом:

**Feature**: Страница "Корзина"

&nbsp; **Scenario**: Общая сумма в корзине

&nbsp; &nbsp; **Given** Открыта страница "Корзина"  
&nbsp; &nbsp; **When** пользователь помещает в корзину товар 234 с количеством \<quantity> и ценой \<price>  
&nbsp; &nbsp; **Then** количество товаров в корзине составляет \<quantity>  
&nbsp; &nbsp; **And** сумма заказа равна \<sum>
