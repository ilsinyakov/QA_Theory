# MongoDB

## Содержание
* [mongosh](#mongosh)
   * [Узнать, в какой БД находимся](#узнать-в-какой-бд-находимся)
   * [Вывести список всех БД на сервере](#вывести-список-всех-бд-на-сервере)
   * [Переключиться на другую БД](#переключиться-на-другую-бд)
   * [Получить список коллекций в БД](#получить-список-коллекций-в-бд)
   * [Получить список всех документов в коллекции](#получить-список-всех-документов-в-коллекции)
   * [Получить количество документов в коллекции](#получить-количество-документов-в-коллекции)
   * [Фильтрация документов по условиям](#фильтрация-документов-по-условиям)
   * [Удаление документов](#удаление-документов)
* [Регулярные выражения (оператор $regex)](#регулярные-выражения-оператор-regex)

## mongosh

### Узнать, в какой БД находимся:

```javascript
db
```
или
```javascript
db.getName()
```

### Вывести список всех БД на сервере:

```javascript
show dbs
```
или
```javascript
db.adminCommand({ listDatabases: 1 })
```

### Переключиться на другую БД:

```javascript
use myDatabase
```

### Получить список коллекций в БД:

```javascript
show collections
```
или
```javascript
db.getCollectionNames()
```

### Получить список всех документов в коллекции:

```javascript
db.имя_коллекции.find()
```
Чтобы ограничить количество документов, используется метод `limit()`:
```javascript
db.имя_коллекции.find().limit(10)
```

### Получить количество документов в коллекции:

```javascript
   db.имя_коллекции.countDocuments()
```
Если вы хотите узнать количество документов, соответствующих определенным условиям, укажите фильтр:
```javascript
   db.имя_коллекции.countDocuments({ поле: значение })
```

### Фильтрация документов по условиям:

```javascript
db.имя_коллекции.find({ поле: значение })
```

### Удаление документов:  

Для удаления документа используйте метод `deleteOne()` или `deleteMany()`, в зависимости от того, нужно удалить один документ или несколько.

Удаление одного документа с определенным полем:
```javascript
db.имя_коллекции.deleteOne({ поле: значение })
```

Если вам нужно удалить все документы, соответствующие определенным условиям, используйте deleteMany():
```javascript
db.имя_коллекции.deleteMany({ поле: значение })
```

## Регулярные выражения (оператор $regex)

В MongoDB для использования регулярных выражений в запросах вы можете использовать оператор `$regex`.   
Регулярные выражения позволяют вам выполнять поиск строк, соответствующих определённому шаблону.

Примеры использования:

1. Поиск по полному совпадению:

```javascript
db.collection.find({ field: { $regex: /^pattern$/ } })
```

2. Поиск по частичному совпадению:

```javascript
db.collection.find({ field: { $regex: /pattern/ } })
```

3. Чувствительность к регистру:

По умолчанию регулярные выражения чувствительны к регистру. Чтобы игнорировать регистр, используйте флаг `i`:

```javascript
db.collection.find({ field: { $regex: /pattern/i } })
```

4. Поиск с использованием специального символа:

Вы можете использовать специальные символы в регулярных выражениях. 

Например:  
`.` - любой символ  
`* ` - ноль или более повторений

```javascript
db.collection.find({ field: { $regex: /patt.*ern/ } })
```

Этот запрос найдет все документы, где поле `field` имеет значения, начинающиеся с `patt` и заканчивающиеся на `ern`, с любыми символами между ними.

